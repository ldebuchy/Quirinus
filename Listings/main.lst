


ARM Macro Assembler    Page 1 


    1 00000000                 AREA             |.text|, CODE, READONLY
    2 00000000         
    3 00000000         ; Import des controles de périphérique
    4 00000000         ; Controle moteur
    5 00000000                 IMPORT           MOTEUR_INIT ; initialise les mo
                                                            teurs (configure le
                                                            s pwms + GPIO)
    6 00000000                 IMPORT           MOTEUR_DROIT_ON ; activer le mo
                                                            teur droit
    7 00000000                 IMPORT           MOTEUR_DROIT_OFF ; déactiver le
                                                             moteur droit
    8 00000000                 IMPORT           MOTEUR_DROIT_AVANT ; moteur dro
                                                            it tourne vers l'av
                                                            ant
    9 00000000                 IMPORT           MOTEUR_DROIT_ARRIERE ; moteur d
                                                            roit tourne vers l'
                                                            arrière
   10 00000000                 IMPORT           MOTEUR_GAUCHE_ON ; activer le m
                                                            oteur gauche
   11 00000000                 IMPORT           MOTEUR_GAUCHE_OFF ; déactiver l
                                                            e moteur gauche
   12 00000000                 IMPORT           MOTEUR_GAUCHE_AVANT ; moteur ga
                                                            uche tourne vers l'
                                                            avant
   13 00000000                 IMPORT           MOTEUR_GAUCHE_ARRIERE ; moteur 
                                                            gauche tourne vers 
                                                            l'arrière
   14 00000000         
   15 00000000         ; Controle led
   16 00000000                 IMPORT           LED_INIT
   17 00000000                 IMPORT           LED_DROITE_ON
   18 00000000                 IMPORT           LED_DROITE_OFF
   19 00000000                 IMPORT           LED_GAUCHE_ON
   20 00000000                 IMPORT           LED_GAUCHE_OFF
   21 00000000         
   22 00000000         ; État switchs
   23 00000000                 IMPORT           SWITCH_INIT
   24 00000000                 IMPORT           SWITCH_1
   25 00000000                 IMPORT           SWITCH_2
   26 00000000         
   27 00000000         ; États bumper
   28 00000000                 IMPORT           BUMPER_INIT
   29 00000000                 IMPORT           BUMPER_DROIT
   30 00000000                 IMPORT           BUMPER_GAUCHE
   31 00000000         
   32 00000000         ; Initialisation des variables et constante
   33 00000000 20000001 
                       LONG_ADR
                               EQU              0x20000001
   34 00000000 0017C000 
                       ROT_TIME_45
                               EQU              0x17C000
   35 00000000 002F8000 
                       ROT_TIME_90
                               EQU              0x2F8000
   36 00000000 005F0000 
                       ROT_TIME_180
                               EQU              0x5F0000
   37 00000000 00BC0000 



ARM Macro Assembler    Page 2 


                       ROT_TIME_360
                               EQU              0xBC0000
   38 00000000         
   39 00000000 E0001004 
                       DWT_CYCCNT
                               EQU              0xE0001004
   40 00000000                 ENTRY
   41 00000000                 EXPORT           __main
   42 00000000         __main
   43 00000000         
   44 00000000 F7FF FFFE       BL               MOTEUR_INIT
   45 00000004 F7FF FFFE       BL               LED_INIT
   46 00000008 F7FF FFFE       BL               SWITCH_INIT
   47 0000000C F7FF FFFE       BL               BUMPER_INIT
   48 00000010         
   49 00000010         ; Initalisation du compteur de cycle de l'horloge
   50 00000010 48DA            LDR              R0, =0xE000EDFC ; Adresse du re
                                                            gistre DEMCR (Debug
                                                             Exception and Moni
                                                            tor Control)
   51 00000012 6801            LDR              R1, [R0]    ; Charger sa valeur
                                                             actuelle
   52 00000014 F041 7180       ORR              R1, R1, #(1 << 24) ; Activer TR
                                                            CENA (bit 24)
   53 00000018 6001            STR              R1, [R0]    ; Écrire la nouvell
                                                            e valeur dans DEMCR
                                                            
   54 0000001A         
   55 0000001A 48D9            LDR              R0, =0xE0001000 ; Adresse de DW
                                                            T_CYCCNT
   56 0000001C 6801            LDR              R1, [R0]    ; Charger sa valeur
                                                             actuelle
   57 0000001E F041 0101       ORR              R1, R1, #1  ; Activer le compte
                                                            ur de cycles (bit 0
                                                            )
   58 00000022 6001            STR              R1, [R0]    ; Écrire la nouvell
                                                            e valeur
   59 00000024         
   60 00000024         mode_passif_loop                     ; boucle principale
                                                             ne fait rien tant 
                                                            qu'aucun bouton est
                                                             pressé
   61 00000024 F7FF FFFE       BL               LED_DROITE_OFF
   62 00000028 F7FF FFFE       BL               LED_GAUCHE_OFF
   63 0000002C F7FF FFFE       BL               MOTEUR_GAUCHE_OFF
   64 00000030 F7FF FFFE       BL               MOTEUR_DROIT_OFF
   65 00000034         
   66 00000034 F7FF FFFE       BL               SWITCH_1
   67 00000038 2800            CMP              r0, #0x0
   68 0000003A BF08 F000 
              F808             BLEQ             mode_reperage_phase_1
   69 00000040         
   70 00000040 F7FF FFFE       BL               SWITCH_2
   71 00000044 2800            CMP              r0, #0x0
   72 00000046 BF08 F000 
              F89C             BLEQ             mode_surveillance
   73 0000004C         
   74 0000004C F7FF FFEA       BL               mode_passif_loop
   75 00000050         



ARM Macro Assembler    Page 3 


   76 00000050         mode_reperage_phase_1                ; mode repérage
   77 00000050 F7FF FFFE       BL               LED_GAUCHE_ON
   78 00000054 F7FF FFFE       BL               LED_DROITE_ON
   79 00000058         
   80 00000058         ; Attend que l'utilisateur est éloigné son doigt
   81 00000058 F000 F8F1       BL               wait_switch_1_free
   82 0000005C         
   83 0000005C F44F 1180       ldr              r1, =0x100000
   84 00000060 F000 F8EA       BL               wait
   85 00000064         
   86 00000064 F04F 0203       ldr              r2, =0x3    ; Définition du nom
                                                            bre de cligottement
                                                            
   87 00000068 F000 F8F5       BL               Clignottement
   88 0000006C         
   89 0000006C         ;BL animation_1
   90 0000006C         
   91 0000006C F04F 0202       ldr              r2, =0x2    ; Définition du nom
                                                            bre de cligottement
                                                            
   92 00000070 F000 F8F1       BL               Clignottement
   93 00000074         
   94 00000074 F7FF FFFE       BL               MOTEUR_DROIT_ON
   95 00000078 F7FF FFFE       BL               MOTEUR_GAUCHE_ON
   96 0000007C F7FF FFFE       BL               MOTEUR_DROIT_AVANT
   97 00000080 F7FF FFFE       BL               MOTEUR_GAUCHE_ARRIERE
   98 00000084 F44F 113E       ldr              r1, =ROT_TIME_90
   99 00000088 F000 F8D6       BL               wait
  100 0000008C         
  101 0000008C         
  102 0000008C F7FF FFFE       BL               MOTEUR_DROIT_AVANT
  103 00000090 F7FF FFFE       BL               MOTEUR_GAUCHE_AVANT
  104 00000094         mode_reperage_phase_1_loop           ; avance jusqu'a ce
                                                             qu'un bumper soit 
                                                            touché
  105 00000094 F7FF FFFE       BL               BUMPER_DROIT
  106 00000098 2800            CMP              r0, #0x0
  107 0000009A D004            BEQ              mode_reperage_phase_2 ; Si rien
                                                             est touché, contin
                                                            ue sa détection
  108 0000009C         
  109 0000009C F7FF FFFE       BL               BUMPER_GAUCHE
  110 000000A0 2800            CMP              r0, #0x0
  111 000000A2 D000            BEQ              mode_reperage_phase_2 ; Si rien
                                                             est touché, contin
                                                            ue sa détection
  112 000000A4         
  113 000000A4 E7F6            B                mode_reperage_phase_1_loop
  114 000000A6         
  115 000000A6         ; recule et demi toure
  116 000000A6         mode_reperage_phase_2
  117 000000A6         
  118 000000A6 F7FF FFFE       BL               MOTEUR_DROIT_ARRIERE
  119 000000AA F7FF FFFE       BL               MOTEUR_GAUCHE_ARRIERE
  120 000000AE         
  121 000000AE F44F 0194       ldr              r1, =0x4A0000
  122 000000B2 F000 F8C1       BL               wait
  123 000000B6         
  124 000000B6 F7FF FFFE       BL               MOTEUR_DROIT_OFF



ARM Macro Assembler    Page 4 


  125 000000BA F7FF FFFE       BL               MOTEUR_GAUCHE_OFF
  126 000000BE         
  127 000000BE         ; Lire le compteur avant l'opération
  128 000000BE 4FB1            LDR              R7, =DWT_CYCCNT ; Adresse du re
                                                            gistre DWT_CYCCNT
  129 000000C0 F8D7 8000       LDR              R8, [R7]    ; Charger la valeur
                                                             initiale dans R8 (
                                                            start)
  130 000000C4         
  131 000000C4 F7FF FFFE       BL               MOTEUR_DROIT_ON
  132 000000C8 F7FF FFFE       BL               MOTEUR_GAUCHE_ON
  133 000000CC F7FF FFFE       BL               MOTEUR_DROIT_ARRIERE
  134 000000D0 F7FF FFFE       BL               MOTEUR_GAUCHE_AVANT
  135 000000D4         
  136 000000D4 F44F 01BE       ldr              r1, =ROT_TIME_180
  137 000000D8 F000 F8AE       BL               wait
  138 000000DC         
  139 000000DC F7FF FFFE       BL               MOTEUR_DROIT_AVANT
  140 000000E0 F7FF FFFE       BL               MOTEUR_GAUCHE_AVANT
  141 000000E4         
  142 000000E4         mode_reperage_phase_2_loop           ; avance jusqu'a ce
                                                             qu'un bumper soit 
                                                            touché
  143 000000E4         
  144 000000E4 F7FF FFFE       BL               BUMPER_DROIT
  145 000000E8 2800            CMP              r0, #0x0
  146 000000EA D004            BEQ              mode_reperage_phase_3 ; Si rien
                                                             est touché, contin
                                                            ue sa détection
  147 000000EC         
  148 000000EC F7FF FFFE       BL               BUMPER_GAUCHE
  149 000000F0 2800            CMP              r0, #0x0
  150 000000F2 D000            BEQ              mode_reperage_phase_3 ; Si rien
                                                             est touché, contin
                                                            ue sa détection
  151 000000F4         
  152 000000F4 E7F6            B                mode_reperage_phase_2_loop
  153 000000F6         
  154 000000F6         mode_reperage_phase_3
  155 000000F6         
  156 000000F6 F7FF FFFE       BL               MOTEUR_DROIT_ARRIERE
  157 000000FA F7FF FFFE       BL               MOTEUR_GAUCHE_ARRIERE
  158 000000FE         
  159 000000FE F44F 0194       ldr              r1, = 0x4A0000
  160 00000102 F000 F899       BL               wait
  161 00000106         
  162 00000106 F7FF FFFE       BL               MOTEUR_DROIT_OFF
  163 0000010A F7FF FFFE       BL               MOTEUR_GAUCHE_OFF
  164 0000010E         
  165 0000010E         ; Lire le compteur après l'opération
  166 0000010E F8D7 9000       LDR              R9, [R7]    ; Charger la valeur
                                                             finale dans R2 (en
                                                            d)
  167 00000112         
  168 00000112         ; Calculer le nombre de cycles écoulés
  169 00000112 EBA9 0308       SUB              R3, R9, R8  ; R3 = end - start
  170 00000116         
  171 00000116 EA4F 0393       LSR              r3, r3, #2
  172 0000011A         



ARM Macro Assembler    Page 5 


  173 0000011A 489B            ldr              r0, =LONG_ADR ; Enregistrement 
                                                            de la longeur
  174 0000011C 6003            str              r3, [r0]
  175 0000011E         
  176 0000011E F7FF FFFE       BL               MOTEUR_DROIT_ON
  177 00000122 F7FF FFFE       BL               MOTEUR_GAUCHE_ON
  178 00000126 F7FF FFFE       BL               MOTEUR_DROIT_AVANT
  179 0000012A F7FF FFFE       BL               MOTEUR_GAUCHE_ARRIERE
  180 0000012E         
  181 0000012E F44F 01BE       ldr              r1, = ROT_TIME_180
  182 00000132 F000 F881       BL               wait
  183 00000136         
  184 00000136 F7FF FFFE       BL               MOTEUR_DROIT_AVANT
  185 0000013A F7FF FFFE       BL               MOTEUR_GAUCHE_AVANT
  186 0000013E         
  187 0000013E 4892            ldr              r0, =LONG_ADR
  188 00000140 6803            ldr              r3, [r0]
  189 00000142 EA4F 0353       LSR              r3, r3, #1  ; on divise la long
                                                            eur enregistré pour
                                                             revenir au millieu
                                                            x lors de la 3ème p
                                                            hase
  190 00000146         mode_reperage_phase_3_loop           ; avance jusqu'a ce
                                                             qu'un bumper soit 
                                                            touché
  191 00000146 1E5B            subs             r3, r3, #1
  192 00000148 D1FD            bne              mode_reperage_phase_3_loop
  193 0000014A         
  194 0000014A F7FF FFFE       BL               MOTEUR_DROIT_ARRIERE
  195 0000014E F7FF FFFE       BL               MOTEUR_GAUCHE_AVANT
  196 00000152         
  197 00000152 F44F 113E       ldr              r1, = ROT_TIME_90
  198 00000156 F000 F86F       BL               wait
  199 0000015A         
  200 0000015A F7FF FFFE       BL               MOTEUR_GAUCHE_OFF
  201 0000015E F7FF FFFE       BL               MOTEUR_DROIT_OFF
  202 00000162         
  203 00000162 F7FF FFFE       BL               LED_DROITE_ON
  204 00000166 F7FF FFFE       BL               LED_GAUCHE_ON
  205 0000016A F44F 1180       ldr              r1, =0x100000
  206 0000016E F000 F863       BL               wait
  207 00000172 F7FF FFFE       BL               LED_DROITE_OFF
  208 00000176 F7FF FFFE       BL               LED_GAUCHE_OFF
  209 0000017A         
  210 0000017A F04F 0202       ldr              r2, =0x2    ; Définition du nom
                                                            bre de cligottement
                                                            
  211 0000017E F000 F86A       BL               Clignottement
  212 00000182 E74F            B                mode_passif_loop
  213 00000184         
  214 00000184         mode_surveillance
  215 00000184 F7FF FFFE       BL               LED_GAUCHE_ON
  216 00000188 F7FF FFFE       BL               LED_DROITE_ON
  217 0000018C F000 F85D       BL               wait_switch_2_free ; Attend que
                                                             l'utilisateur est 
                                                            éloigné son doigt
  218 00000190 F44F 1180       ldr              r1, =0x100000
  219 00000194 F000 F850       BL               wait
  220 00000198 F04F 0203       ldr              r2, =0x3    ; Définition du nom



ARM Macro Assembler    Page 6 


                                                            bre de cligottement
                                                            
  221 0000019C F000 F85B       BL               Clignottement
  222 000001A0         
  223 000001A0 F8DF 81E4       ldr              r8, =LONG_ADR
  224 000001A4 F5A8 0820       sub              r8, #0xA00000
  225 000001A8 F8D8 7000       ldr              r7, [r8]
  226 000001AC         
  227 000001AC F04F 0202       ldr              r2, =0x2    ; Définition du nom
                                                            bre de cligottement
                                                            
  228 000001B0 F000 F851       BL               Clignottement
  229 000001B4         
  230 000001B4 F7FF FFFE       BL               MOTEUR_DROIT_ON
  231 000001B8 F7FF FFFE       BL               MOTEUR_GAUCHE_ON
  232 000001BC F7FF FFFE       BL               MOTEUR_DROIT_AVANT
  233 000001C0 F7FF FFFE       BL               MOTEUR_GAUCHE_ARRIERE
  234 000001C4 F44F 113E       ldr              r1, =ROT_TIME_90
  235 000001C8 F000 F836       BL               wait
  236 000001CC         
  237 000001CC F7FF FFFE       BL               MOTEUR_DROIT_AVANT
  238 000001D0 F7FF FFFE       BL               MOTEUR_GAUCHE_AVANT
  239 000001D4         
  240 000001D4         mode_surveillance_loop_1
  241 000001D4 F7FF FFFE       BL               BUMPER_DROIT
  242 000001D8 2800            CMP              r0, #0x0
  243 000001DA D063            BEQ              interruption_surveillance
  244 000001DC         
  245 000001DC F7FF FFFE       BL               BUMPER_GAUCHE
  246 000001E0 2800            CMP              r0, #0x0
  247 000001E2 D05F            BEQ              interruption_surveillance
  248 000001E4         
  249 000001E4 3C01            subs             r4, #1
  250 000001E6 D1F5            BNE              mode_surveillance_loop_1
  251 000001E8         
  252 000001E8 F7FF FFFE       BL               MOTEUR_DROIT_ARRIERE
  253 000001EC F7FF FFFE       BL               MOTEUR_GAUCHE_AVANT
  254 000001F0 F44F 01BE       ldr              r1, =ROT_TIME_180
  255 000001F4 F000 F820       BL               wait
  256 000001F8 F7FF FFFE       BL               MOTEUR_DROIT_AVANT
  257 000001FC F7FF FFFE       BL               MOTEUR_GAUCHE_AVANT
  258 00000200 681C            ldr              r4, [r3]
  259 00000202 F000 F800       BL               mode_surveillance_loop_2
  260 00000206         
  261 00000206         mode_surveillance_loop_2
  262 00000206 F7FF FFFE       BL               BUMPER_DROIT
  263 0000020A 2800            CMP              r0, #0x0
  264 0000020C D04A            BEQ              interruption_surveillance
  265 0000020E         
  266 0000020E F7FF FFFE       BL               BUMPER_GAUCHE
  267 00000212 2800            CMP              r0, #0x0
  268 00000214 D046            BEQ              interruption_surveillance
  269 00000216         
  270 00000216 3C01            subs             r4, #1
  271 00000218 D1F5            BNE              mode_surveillance_loop_2
  272 0000021A         
  273 0000021A F7FF FFFE       BL               MOTEUR_DROIT_ARRIERE
  274 0000021E F7FF FFFE       BL               MOTEUR_GAUCHE_AVANT
  275 00000222 F44F 01BE       ldr              r1, =ROT_TIME_180



ARM Macro Assembler    Page 7 


  276 00000226 F000 F807       BL               wait
  277 0000022A F7FF FFFE       BL               MOTEUR_DROIT_AVANT
  278 0000022E F7FF FFFE       BL               MOTEUR_GAUCHE_AVANT
  279 00000232 681C            ldr              r4, [r3]
  280 00000234 F7FF FFCE       BL               mode_surveillance_loop_1
  281 00000238         
  282 00000238 3901    wait    subs             r1, #1
  283 0000023A D1FD            bne              wait
  284 0000023C 4770            BX               LR
  285 0000023E         
  286 0000023E B500    wait_switch_1_free
                               PUSH             {LR}
  287 00000240         wait_switch_1_free2
  288 00000240 F7FF FFFE       BL               SWITCH_1
  289 00000244 2800            CMP              r0, #0x0
  290 00000246 D0FB            BEQ              wait_switch_1_free2
  291 00000248 BD00            POP              {PC}
  292 0000024A         
  293 0000024A B500    wait_switch_2_free
                               PUSH             {LR}
  294 0000024C         wait_switch_2_free2
  295 0000024C F7FF FFFE       BL               SWITCH_2
  296 00000250 2800            CMP              r0, #0x0
  297 00000252 D0FB            BEQ              wait_switch_2_free2
  298 00000254 BD00            POP              {PC}
  299 00000256         
  300 00000256         Clignottement
  301 00000256 B500            PUSH             {LR}
  302 00000258 F7FF FFFE       BL               LED_GAUCHE_ON
  303 0000025C F7FF FFFE       BL               LED_DROITE_ON
  304 00000260         
  305 00000260 F44F 2120       ldr              r1, =0x0A0000
  306 00000264 F7FF FFE8       BL               wait
  307 00000268         
  308 00000268 F7FF FFFE       BL               LED_GAUCHE_OFF
  309 0000026C F7FF FFFE       BL               LED_DROITE_OFF
  310 00000270         
  311 00000270 F44F 2120       ldr              r1, =0x0A0000
  312 00000274 F7FF FFE0       BL               wait
  313 00000278         
  314 00000278 3A01            subs             r2, #1
  315 0000027A BF18 F7FF 
              FFEB             BLNE             Clignottement
  316 00000280 BD00            POP              {PC}
  317 00000282         
  318 00000282         
  319 00000282         interruption_reperage
  320 00000282 F7FF FFFE       BL               MOTEUR_DROIT_ARRIERE
  321 00000286 F7FF FFFE       BL               MOTEUR_GAUCHE_ARRIERE
  322 0000028A         
  323 0000028A F44F 1180       ldr              r1, =0x100000
  324 0000028E F7FF FFD3       BL               wait
  325 00000292         
  326 00000292 F7FF FFFE       BL               MOTEUR_GAUCHE_OFF
  327 00000296 F7FF FFFE       BL               MOTEUR_DROIT_OFF
  328 0000029A         
  329 0000029A F04F 0210       ldr              r2, =0x10   ; Définition du nom
                                                            bre de cligottement
                                                            



ARM Macro Assembler    Page 8 


  330 0000029E F7FF FFDA       BL               Clignottement
  331 000002A2 E6BF            B                mode_passif_loop
  332 000002A4         
  333 000002A4         interruption_surveillance
  334 000002A4 F7FF FFFE       BL               MOTEUR_DROIT_ARRIERE
  335 000002A8 F7FF FFFE       BL               MOTEUR_GAUCHE_ARRIERE
  336 000002AC         
  337 000002AC F44F 2120       ldr              r1, =0x0A0000
  338 000002B0 F7FF FFC2       BL               wait
  339 000002B4         
  340 000002B4 F7FF FFFE       BL               MOTEUR_DROIT_AVANT
  341 000002B8 F7FF FFFE       BL               MOTEUR_GAUCHE_AVANT
  342 000002BC         
  343 000002BC F44F 2120       ldr              r1, =0x0A0000
  344 000002C0 F7FF FFBA       BL               wait
  345 000002C4         
  346 000002C4 F7FF FFFE       BL               MOTEUR_DROIT_ARRIERE
  347 000002C8 F7FF FFFE       BL               MOTEUR_GAUCHE_ARRIERE
  348 000002CC         
  349 000002CC F44F 2120       ldr              r1, =0x0A0000
  350 000002D0 F7FF FFB2       BL               wait
  351 000002D4         
  352 000002D4 F7FF FFFE       BL               MOTEUR_DROIT_AVANT
  353 000002D8 F7FF FFFE       BL               MOTEUR_GAUCHE_AVANT
  354 000002DC         
  355 000002DC F44F 2120       ldr              r1, =0x0A0000
  356 000002E0 F7FF FFAA       BL               wait
  357 000002E4         
  358 000002E4 F7FF FFFE       BL               MOTEUR_DROIT_ARRIERE
  359 000002E8 F7FF FFFE       BL               MOTEUR_GAUCHE_ARRIERE
  360 000002EC         
  361 000002EC F44F 2120       ldr              r1, =0x0A0000
  362 000002F0 F7FF FFA2       BL               wait
  363 000002F4         
  364 000002F4 F7FF FFFE       BL               MOTEUR_DROIT_AVANT
  365 000002F8 F7FF FFFE       BL               MOTEUR_GAUCHE_AVANT
  366 000002FC         
  367 000002FC E692            B                mode_passif_loop
  368 000002FE         
  369 000002FE         animation_1
  370 000002FE B500            PUSH             {LR}
  371 00000300 F7FF FFFE       BL               MOTEUR_DROIT_ON
  372 00000304 F7FF FFFE       BL               MOTEUR_GAUCHE_ON
  373 00000308 F7FF FFFE       BL               MOTEUR_DROIT_AVANT
  374 0000030C F7FF FFFE       BL               MOTEUR_GAUCHE_ARRIERE
  375 00000310         
  376 00000310 F44F 11BE       ldr              r1, =ROT_TIME_45
  377 00000314 F7FF FF90       BL               wait
  378 00000318         
  379 00000318 F7FF FFFE       BL               MOTEUR_DROIT_OFF
  380 0000031C F7FF FFFE       BL               MOTEUR_GAUCHE_OFF
  381 00000320         
  382 00000320 F44F 1100       ldr              r1, = 0x200000
  383 00000324 F7FF FF88       BL               wait
  384 00000328         
  385 00000328 F7FF FFFE       BL               MOTEUR_DROIT_ON
  386 0000032C F7FF FFFE       BL               MOTEUR_GAUCHE_ON
  387 00000330 F7FF FFFE       BL               MOTEUR_DROIT_ARRIERE
  388 00000334 F7FF FFFE       BL               MOTEUR_GAUCHE_AVANT



ARM Macro Assembler    Page 9 


  389 00000338         
  390 00000338 F44F 113E       ldr              r1, =ROT_TIME_90
  391 0000033C F7FF FF7C       BL               wait
  392 00000340         
  393 00000340 F7FF FFFE       BL               MOTEUR_DROIT_OFF
  394 00000344 F7FF FFFE       BL               MOTEUR_GAUCHE_OFF
  395 00000348         
  396 00000348 F44F 1100       ldr              r1, = 0x200000
  397 0000034C F7FF FF74       BL               wait
  398 00000350         
  399 00000350 F7FF FFFE       BL               MOTEUR_DROIT_ON
  400 00000354 F7FF FFFE       BL               MOTEUR_GAUCHE_ON
  401 00000358 F7FF FFFE       BL               MOTEUR_DROIT_AVANT
  402 0000035C F7FF FFFE       BL               MOTEUR_GAUCHE_ARRIERE
  403 00000360         
  404 00000360 F44F 11BE       ldr              r1, =ROT_TIME_45
  405 00000364 F7FF FF68       BL               wait
  406 00000368         
  407 00000368 F7FF FFFE       BL               MOTEUR_DROIT_OFF
  408 0000036C F7FF FFFE       BL               MOTEUR_GAUCHE_OFF
  409 00000370 F44F 01A0       ldr              r1, = 0x500000
  410 00000374 F7FF FF60       BL               wait
  411 00000378 BD00            POP              {PC}
  412 0000037A         
  413 0000037A         
  414 0000037A BF00            nop
  415 0000037C                 END
              E000EDFC 
              E0001000 
              E0001004 
              20000001 
Command Line: --debug --xref --diag_suppress=9931 --cpu=Cortex-M3 --apcs=interw
ork --depend=.\objects\main.d -o.\objects\main.o -I.\RTE\_Target_1 -IC:\Users\l
oicd\AppData\Local\Arm\Packs\ARM\CMSIS\5.9.0\CMSIS\Core\Include -IC:\Users\loic
d\AppData\Local\Arm\Packs\ARM\CMSIS\5.9.0\Device\ARM\ARMCM3\Include --predefine
="__MICROLIB SETA 1" --predefine="__UVISION_VERSION SETA 528" --predefine="_RTE
_ SETA 1" --predefine="ARMCM3 SETA 1" --list=.\listings\main.lst Programs\main.
s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

.text 00000000

Symbol: .text
   Definitions
      At line 1 in file Programs\main.s
   Uses
      None
Comment: .text unused
Clignottement 00000256

Symbol: Clignottement
   Definitions
      At line 300 in file Programs\main.s
   Uses
      At line 87 in file Programs\main.s
      At line 92 in file Programs\main.s
      At line 211 in file Programs\main.s
      At line 221 in file Programs\main.s
      At line 228 in file Programs\main.s
      At line 315 in file Programs\main.s
      At line 330 in file Programs\main.s

__main 00000000

Symbol: __main
   Definitions
      At line 42 in file Programs\main.s
   Uses
      At line 41 in file Programs\main.s
Comment: __main used once
animation_1 000002FE

Symbol: animation_1
   Definitions
      At line 369 in file Programs\main.s
   Uses
      None
Comment: animation_1 unused
interruption_reperage 00000282

Symbol: interruption_reperage
   Definitions
      At line 319 in file Programs\main.s
   Uses
      None
Comment: interruption_reperage unused
interruption_surveillance 000002A4

Symbol: interruption_surveillance
   Definitions
      At line 333 in file Programs\main.s
   Uses
      At line 243 in file Programs\main.s
      At line 247 in file Programs\main.s
      At line 264 in file Programs\main.s
      At line 268 in file Programs\main.s

mode_passif_loop 00000024




ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Relocatable symbols

Symbol: mode_passif_loop
   Definitions
      At line 60 in file Programs\main.s
   Uses
      At line 74 in file Programs\main.s
      At line 212 in file Programs\main.s
      At line 331 in file Programs\main.s
      At line 367 in file Programs\main.s

mode_reperage_phase_1 00000050

Symbol: mode_reperage_phase_1
   Definitions
      At line 76 in file Programs\main.s
   Uses
      At line 68 in file Programs\main.s
Comment: mode_reperage_phase_1 used once
mode_reperage_phase_1_loop 00000094

Symbol: mode_reperage_phase_1_loop
   Definitions
      At line 104 in file Programs\main.s
   Uses
      At line 113 in file Programs\main.s
Comment: mode_reperage_phase_1_loop used once
mode_reperage_phase_2 000000A6

Symbol: mode_reperage_phase_2
   Definitions
      At line 116 in file Programs\main.s
   Uses
      At line 107 in file Programs\main.s
      At line 111 in file Programs\main.s

mode_reperage_phase_2_loop 000000E4

Symbol: mode_reperage_phase_2_loop
   Definitions
      At line 142 in file Programs\main.s
   Uses
      At line 152 in file Programs\main.s
Comment: mode_reperage_phase_2_loop used once
mode_reperage_phase_3 000000F6

Symbol: mode_reperage_phase_3
   Definitions
      At line 154 in file Programs\main.s
   Uses
      At line 146 in file Programs\main.s
      At line 150 in file Programs\main.s

mode_reperage_phase_3_loop 00000146

Symbol: mode_reperage_phase_3_loop
   Definitions
      At line 190 in file Programs\main.s
   Uses
      At line 192 in file Programs\main.s
Comment: mode_reperage_phase_3_loop used once



ARM Macro Assembler    Page 3 Alphabetic symbol ordering
Relocatable symbols

mode_surveillance 00000184

Symbol: mode_surveillance
   Definitions
      At line 214 in file Programs\main.s
   Uses
      At line 72 in file Programs\main.s
Comment: mode_surveillance used once
mode_surveillance_loop_1 000001D4

Symbol: mode_surveillance_loop_1
   Definitions
      At line 240 in file Programs\main.s
   Uses
      At line 250 in file Programs\main.s
      At line 280 in file Programs\main.s

mode_surveillance_loop_2 00000206

Symbol: mode_surveillance_loop_2
   Definitions
      At line 261 in file Programs\main.s
   Uses
      At line 259 in file Programs\main.s
      At line 271 in file Programs\main.s

wait 00000238

Symbol: wait
   Definitions
      At line 282 in file Programs\main.s
   Uses
      At line 84 in file Programs\main.s
      At line 99 in file Programs\main.s
      At line 122 in file Programs\main.s
      At line 137 in file Programs\main.s
      At line 160 in file Programs\main.s
      At line 182 in file Programs\main.s
      At line 198 in file Programs\main.s
      At line 206 in file Programs\main.s
      At line 219 in file Programs\main.s
      At line 235 in file Programs\main.s
      At line 255 in file Programs\main.s
      At line 276 in file Programs\main.s
      At line 283 in file Programs\main.s
      At line 306 in file Programs\main.s
      At line 312 in file Programs\main.s
      At line 324 in file Programs\main.s
      At line 338 in file Programs\main.s
      At line 344 in file Programs\main.s
      At line 350 in file Programs\main.s
      At line 356 in file Programs\main.s
      At line 362 in file Programs\main.s
      At line 377 in file Programs\main.s
      At line 383 in file Programs\main.s
      At line 391 in file Programs\main.s
      At line 397 in file Programs\main.s
      At line 405 in file Programs\main.s
      At line 410 in file Programs\main.s



ARM Macro Assembler    Page 4 Alphabetic symbol ordering
Relocatable symbols


wait_switch_1_free 0000023E

Symbol: wait_switch_1_free
   Definitions
      At line 286 in file Programs\main.s
   Uses
      At line 81 in file Programs\main.s
Comment: wait_switch_1_free used once
wait_switch_1_free2 00000240

Symbol: wait_switch_1_free2
   Definitions
      At line 287 in file Programs\main.s
   Uses
      At line 290 in file Programs\main.s
Comment: wait_switch_1_free2 used once
wait_switch_2_free 0000024A

Symbol: wait_switch_2_free
   Definitions
      At line 293 in file Programs\main.s
   Uses
      At line 217 in file Programs\main.s
Comment: wait_switch_2_free used once
wait_switch_2_free2 0000024C

Symbol: wait_switch_2_free2
   Definitions
      At line 294 in file Programs\main.s
   Uses
      At line 297 in file Programs\main.s
Comment: wait_switch_2_free2 used once
21 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Absolute symbols

DWT_CYCCNT E0001004

Symbol: DWT_CYCCNT
   Definitions
      At line 39 in file Programs\main.s
   Uses
      At line 128 in file Programs\main.s
Comment: DWT_CYCCNT used once
LONG_ADR 20000001

Symbol: LONG_ADR
   Definitions
      At line 33 in file Programs\main.s
   Uses
      At line 173 in file Programs\main.s
      At line 187 in file Programs\main.s
      At line 223 in file Programs\main.s

ROT_TIME_180 005F0000

Symbol: ROT_TIME_180
   Definitions
      At line 36 in file Programs\main.s
   Uses
      At line 136 in file Programs\main.s
      At line 181 in file Programs\main.s
      At line 254 in file Programs\main.s
      At line 275 in file Programs\main.s

ROT_TIME_360 00BC0000

Symbol: ROT_TIME_360
   Definitions
      At line 37 in file Programs\main.s
   Uses
      None
Comment: ROT_TIME_360 unused
ROT_TIME_45 0017C000

Symbol: ROT_TIME_45
   Definitions
      At line 34 in file Programs\main.s
   Uses
      At line 376 in file Programs\main.s
      At line 404 in file Programs\main.s

ROT_TIME_90 002F8000

Symbol: ROT_TIME_90
   Definitions
      At line 35 in file Programs\main.s
   Uses
      At line 98 in file Programs\main.s
      At line 197 in file Programs\main.s
      At line 234 in file Programs\main.s
      At line 390 in file Programs\main.s

6 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
External symbols

BUMPER_DROIT 00000000

Symbol: BUMPER_DROIT
   Definitions
      At line 29 in file Programs\main.s
   Uses
      At line 105 in file Programs\main.s
      At line 144 in file Programs\main.s
      At line 241 in file Programs\main.s
      At line 262 in file Programs\main.s

BUMPER_GAUCHE 00000000

Symbol: BUMPER_GAUCHE
   Definitions
      At line 30 in file Programs\main.s
   Uses
      At line 109 in file Programs\main.s
      At line 148 in file Programs\main.s
      At line 245 in file Programs\main.s
      At line 266 in file Programs\main.s

BUMPER_INIT 00000000

Symbol: BUMPER_INIT
   Definitions
      At line 28 in file Programs\main.s
   Uses
      At line 47 in file Programs\main.s
Comment: BUMPER_INIT used once
LED_DROITE_OFF 00000000

Symbol: LED_DROITE_OFF
   Definitions
      At line 18 in file Programs\main.s
   Uses
      At line 61 in file Programs\main.s
      At line 207 in file Programs\main.s
      At line 309 in file Programs\main.s

LED_DROITE_ON 00000000

Symbol: LED_DROITE_ON
   Definitions
      At line 17 in file Programs\main.s
   Uses
      At line 78 in file Programs\main.s
      At line 203 in file Programs\main.s
      At line 216 in file Programs\main.s
      At line 303 in file Programs\main.s

LED_GAUCHE_OFF 00000000

Symbol: LED_GAUCHE_OFF
   Definitions
      At line 20 in file Programs\main.s
   Uses
      At line 62 in file Programs\main.s
      At line 208 in file Programs\main.s



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
External symbols

      At line 308 in file Programs\main.s

LED_GAUCHE_ON 00000000

Symbol: LED_GAUCHE_ON
   Definitions
      At line 19 in file Programs\main.s
   Uses
      At line 77 in file Programs\main.s
      At line 204 in file Programs\main.s
      At line 215 in file Programs\main.s
      At line 302 in file Programs\main.s

LED_INIT 00000000

Symbol: LED_INIT
   Definitions
      At line 16 in file Programs\main.s
   Uses
      At line 45 in file Programs\main.s
Comment: LED_INIT used once
MOTEUR_DROIT_ARRIERE 00000000

Symbol: MOTEUR_DROIT_ARRIERE
   Definitions
      At line 9 in file Programs\main.s
   Uses
      At line 118 in file Programs\main.s
      At line 133 in file Programs\main.s
      At line 156 in file Programs\main.s
      At line 194 in file Programs\main.s
      At line 252 in file Programs\main.s
      At line 273 in file Programs\main.s
      At line 320 in file Programs\main.s
      At line 334 in file Programs\main.s
      At line 346 in file Programs\main.s
      At line 358 in file Programs\main.s
      At line 387 in file Programs\main.s

MOTEUR_DROIT_AVANT 00000000

Symbol: MOTEUR_DROIT_AVANT
   Definitions
      At line 8 in file Programs\main.s
   Uses
      At line 96 in file Programs\main.s
      At line 102 in file Programs\main.s
      At line 139 in file Programs\main.s
      At line 178 in file Programs\main.s
      At line 184 in file Programs\main.s
      At line 232 in file Programs\main.s
      At line 237 in file Programs\main.s
      At line 256 in file Programs\main.s
      At line 277 in file Programs\main.s
      At line 340 in file Programs\main.s
      At line 352 in file Programs\main.s
      At line 364 in file Programs\main.s
      At line 373 in file Programs\main.s
      At line 401 in file Programs\main.s



ARM Macro Assembler    Page 3 Alphabetic symbol ordering
External symbols


MOTEUR_DROIT_OFF 00000000

Symbol: MOTEUR_DROIT_OFF
   Definitions
      At line 7 in file Programs\main.s
   Uses
      At line 64 in file Programs\main.s
      At line 124 in file Programs\main.s
      At line 162 in file Programs\main.s
      At line 201 in file Programs\main.s
      At line 327 in file Programs\main.s
      At line 379 in file Programs\main.s
      At line 393 in file Programs\main.s
      At line 407 in file Programs\main.s

MOTEUR_DROIT_ON 00000000

Symbol: MOTEUR_DROIT_ON
   Definitions
      At line 6 in file Programs\main.s
   Uses
      At line 94 in file Programs\main.s
      At line 131 in file Programs\main.s
      At line 176 in file Programs\main.s
      At line 230 in file Programs\main.s
      At line 371 in file Programs\main.s
      At line 385 in file Programs\main.s
      At line 399 in file Programs\main.s

MOTEUR_GAUCHE_ARRIERE 00000000

Symbol: MOTEUR_GAUCHE_ARRIERE
   Definitions
      At line 13 in file Programs\main.s
   Uses
      At line 97 in file Programs\main.s
      At line 119 in file Programs\main.s
      At line 157 in file Programs\main.s
      At line 179 in file Programs\main.s
      At line 233 in file Programs\main.s
      At line 321 in file Programs\main.s
      At line 335 in file Programs\main.s
      At line 347 in file Programs\main.s
      At line 359 in file Programs\main.s
      At line 374 in file Programs\main.s
      At line 402 in file Programs\main.s

MOTEUR_GAUCHE_AVANT 00000000

Symbol: MOTEUR_GAUCHE_AVANT
   Definitions
      At line 12 in file Programs\main.s
   Uses
      At line 103 in file Programs\main.s
      At line 134 in file Programs\main.s
      At line 140 in file Programs\main.s
      At line 185 in file Programs\main.s
      At line 195 in file Programs\main.s



ARM Macro Assembler    Page 4 Alphabetic symbol ordering
External symbols

      At line 238 in file Programs\main.s
      At line 253 in file Programs\main.s
      At line 257 in file Programs\main.s
      At line 274 in file Programs\main.s
      At line 278 in file Programs\main.s
      At line 341 in file Programs\main.s
      At line 353 in file Programs\main.s
      At line 365 in file Programs\main.s
      At line 388 in file Programs\main.s

MOTEUR_GAUCHE_OFF 00000000

Symbol: MOTEUR_GAUCHE_OFF
   Definitions
      At line 11 in file Programs\main.s
   Uses
      At line 63 in file Programs\main.s
      At line 125 in file Programs\main.s
      At line 163 in file Programs\main.s
      At line 200 in file Programs\main.s
      At line 326 in file Programs\main.s
      At line 380 in file Programs\main.s
      At line 394 in file Programs\main.s
      At line 408 in file Programs\main.s

MOTEUR_GAUCHE_ON 00000000

Symbol: MOTEUR_GAUCHE_ON
   Definitions
      At line 10 in file Programs\main.s
   Uses
      At line 95 in file Programs\main.s
      At line 132 in file Programs\main.s
      At line 177 in file Programs\main.s
      At line 231 in file Programs\main.s
      At line 372 in file Programs\main.s
      At line 386 in file Programs\main.s
      At line 400 in file Programs\main.s

MOTEUR_INIT 00000000

Symbol: MOTEUR_INIT
   Definitions
      At line 5 in file Programs\main.s
   Uses
      At line 44 in file Programs\main.s
Comment: MOTEUR_INIT used once
SWITCH_1 00000000

Symbol: SWITCH_1
   Definitions
      At line 24 in file Programs\main.s
   Uses
      At line 66 in file Programs\main.s
      At line 288 in file Programs\main.s

SWITCH_2 00000000

Symbol: SWITCH_2



ARM Macro Assembler    Page 5 Alphabetic symbol ordering
External symbols

   Definitions
      At line 25 in file Programs\main.s
   Uses
      At line 70 in file Programs\main.s
      At line 295 in file Programs\main.s

SWITCH_INIT 00000000

Symbol: SWITCH_INIT
   Definitions
      At line 23 in file Programs\main.s
   Uses
      At line 46 in file Programs\main.s
Comment: SWITCH_INIT used once
20 symbols
383 symbols in table
