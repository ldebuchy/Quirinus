


ARM Macro Assembler    Page 1 


    1 00000000                 AREA             |.text|, CODE, READONLY
    2 00000000         
    3 00000000         ; Import des controles de périphérique
    4 00000000         ; Controle moteur
    5 00000000                 IMPORT           MOTEUR_INIT ; initialise les mo
                                                            teurs (configure le
                                                            s pwms + GPIO)
    6 00000000                 IMPORT           MOTEUR_DROIT_ON ; activer le mo
                                                            teur droit
    7 00000000                 IMPORT           MOTEUR_DROIT_OFF ; déactiver le
                                                             moteur droit
    8 00000000                 IMPORT           MOTEUR_DROIT_AVANT ; moteur dro
                                                            it tourne vers l'av
                                                            ant
    9 00000000                 IMPORT           MOTEUR_DROIT_ARRIERE ; moteur d
                                                            roit tourne vers l'
                                                            arrière
   10 00000000                 IMPORT           MOTEUR_GAUCHE_ON ; activer le m
                                                            oteur gauche
   11 00000000                 IMPORT           MOTEUR_GAUCHE_OFF ; déactiver l
                                                            e moteur gauche
   12 00000000                 IMPORT           MOTEUR_GAUCHE_AVANT ; moteur ga
                                                            uche tourne vers l'
                                                            avant
   13 00000000                 IMPORT           MOTEUR_GAUCHE_ARRIERE ; moteur 
                                                            gauche tourne vers 
                                                            l'arrière
   14 00000000         
   15 00000000         ; Controle led
   16 00000000                 IMPORT           LED_INIT
   17 00000000                 IMPORT           LED_DROITE_ON
   18 00000000                 IMPORT           LED_DROITE_OFF
   19 00000000                 IMPORT           LED_GAUCHE_ON
   20 00000000                 IMPORT           LED_GAUCHE_OFF
   21 00000000         
   22 00000000         ; État switchs
   23 00000000                 IMPORT           SWITCH_INIT
   24 00000000                 IMPORT           SWITCH_1
   25 00000000                 IMPORT           SWITCH_2
   26 00000000         
   27 00000000         ; États bumper
   28 00000000                 IMPORT           BUMPER_INIT
   29 00000000                 IMPORT           BUMPER_DROIT
   30 00000000                 IMPORT           BUMPER_GAUCHE
   31 00000000         
   32 00000000         ; Initialisation des variables et constante
   33 00000000 20000001 
                       LONG_ADR
                               EQU              0x20000001
   34 00000000 0017C000 
                       ROT_TIME_45
                               EQU              0x17C000
   35 00000000 002F8000 
                       ROT_TIME_90
                               EQU              0x2F8000
   36 00000000 005F0000 
                       ROT_TIME_180
                               EQU              0x5F0000
   37 00000000 00BC0000 



ARM Macro Assembler    Page 2 


                       ROT_TIME_360
                               EQU              0xBC0000
   38 00000000         
   39 00000000 E0001004 
                       DWT_CYCCNT
                               EQU              0xE0001004
   40 00000000                 ENTRY
   41 00000000                 EXPORT           __main
   42 00000000         __main
   43 00000000         
   44 00000000 F7FF FFFE       BL               MOTEUR_INIT
   45 00000004 F7FF FFFE       BL               LED_INIT
   46 00000008 F7FF FFFE       BL               SWITCH_INIT
   47 0000000C F7FF FFFE       BL               BUMPER_INIT
   48 00000010         
   49 00000010         ; Initalisation du compteur de cycle de l'horloge
   50 00000010 48DE            LDR              R0, =0xE000EDFC ; Adresse du re
                                                            gistre DEMCR (Debug
                                                             Exception and Moni
                                                            tor Control)
   51 00000012 6801            LDR              R1, [R0]    ; Charger sa valeur
                                                             actuelle
   52 00000014 F041 7180       ORR              R1, R1, #(1 << 24) ; Activer TR
                                                            CENA (bit 24)
   53 00000018 6001            STR              R1, [R0]    ; Écrire la nouvell
                                                            e valeur dans DEMCR
                                                            
   54 0000001A         
   55 0000001A 48DD            LDR              R0, =0xE0001000 ; Adresse de DW
                                                            T_CYCCNT
   56 0000001C 6801            LDR              R1, [R0]    ; Charger sa valeur
                                                             actuelle
   57 0000001E F041 0101       ORR              R1, R1, #1  ; Activer le compte
                                                            ur de cycles (bit 0
                                                            )
   58 00000022 6001            STR              R1, [R0]    ; Écrire la nouvell
                                                            e valeur
   59 00000024         
   60 00000024         mode_passif_loop                     ; boucle principale
                                                             ne fait rien tant 
                                                            qu'aucun bouton est
                                                             pressé
   61 00000024 F7FF FFFE       BL               LED_DROITE_OFF
   62 00000028 F7FF FFFE       BL               LED_GAUCHE_OFF
   63 0000002C F7FF FFFE       BL               MOTEUR_GAUCHE_OFF
   64 00000030 F7FF FFFE       BL               MOTEUR_DROIT_OFF
   65 00000034         
   66 00000034 F7FF FFFE       BL               SWITCH_1
   67 00000038 2800            CMP              r0, #0x0
   68 0000003A BF08 F000 
              F808             BLEQ             mode_reperage_phase_1
   69 00000040         
   70 00000040 F7FF FFFE       BL               SWITCH_2
   71 00000044 2800            CMP              r0, #0x0
   72 00000046 BF08 F000 
              F8A6             BLEQ             mode_surveillance
   73 0000004C         
   74 0000004C F7FF FFEA       BL               mode_passif_loop
   75 00000050         



ARM Macro Assembler    Page 3 


   76 00000050         mode_reperage_phase_1                ; mode repérage
   77 00000050 F7FF FFFE       BL               LED_GAUCHE_ON
   78 00000054 F7FF FFFE       BL               LED_DROITE_ON
   79 00000058         
   80 00000058         ; Attend que l'utilisateur est éloigné son doigt
   81 00000058 F000 F8F9       BL               wait_switch_1_free
   82 0000005C         
   83 0000005C F44F 1180       ldr              r1, =0x100000
   84 00000060 F000 F8F2       BL               wait
   85 00000064         
   86 00000064 F04F 0201       ldr              r2, =0x1    ; Définition du nom
                                                            bre de cligottement
                                                            
   87 00000068 F000 F8FD       BL               Clignottement
   88 0000006C         
   89 0000006C F000 F94F       BL               animation_1
   90 00000070         
   91 00000070 F04F 0202       ldr              r2, =0x2    ; Définition du nom
                                                            bre de cligottement
                                                            
   92 00000074 F000 F8F7       BL               Clignottement
   93 00000078         
   94 00000078 F7FF FFFE       BL               MOTEUR_DROIT_ON
   95 0000007C F7FF FFFE       BL               MOTEUR_GAUCHE_ON
   96 00000080 F7FF FFFE       BL               MOTEUR_DROIT_AVANT
   97 00000084 F7FF FFFE       BL               MOTEUR_GAUCHE_ARRIERE
   98 00000088 F44F 113E       ldr              r1, =ROT_TIME_90
   99 0000008C F000 F8DC       BL               wait
  100 00000090         
  101 00000090         
  102 00000090 F7FF FFFE       BL               MOTEUR_DROIT_AVANT
  103 00000094 F7FF FFFE       BL               MOTEUR_GAUCHE_AVANT
  104 00000098         mode_reperage_phase_1_loop           ; avance jusqu'a ce
                                                             qu'un bumper soit 
                                                            touché
  105 00000098 F7FF FFFE       BL               BUMPER_DROIT
  106 0000009C 2800            CMP              r0, #0x0
  107 0000009E D004            BEQ              mode_reperage_phase_2 ; Si rien
                                                             est touché, contin
                                                            ue sa détection
  108 000000A0         
  109 000000A0 F7FF FFFE       BL               BUMPER_GAUCHE
  110 000000A4 2800            CMP              r0, #0x0
  111 000000A6 D000            BEQ              mode_reperage_phase_2 ; Si rien
                                                             est touché, contin
                                                            ue sa détection
  112 000000A8         
  113 000000A8 E7F6            B                mode_reperage_phase_1_loop
  114 000000AA         
  115 000000AA         ; recule et demi toure
  116 000000AA         mode_reperage_phase_2
  117 000000AA         
  118 000000AA F7FF FFFE       BL               MOTEUR_DROIT_ARRIERE
  119 000000AE F7FF FFFE       BL               MOTEUR_GAUCHE_ARRIERE
  120 000000B2         
  121 000000B2 F44F 0194       ldr              r1, =0x4A0000
  122 000000B6 F000 F8C7       BL               wait
  123 000000BA         
  124 000000BA F7FF FFFE       BL               MOTEUR_DROIT_OFF



ARM Macro Assembler    Page 4 


  125 000000BE F7FF FFFE       BL               MOTEUR_GAUCHE_OFF
  126 000000C2         
  127 000000C2         ; Lire le compteur avant l'opération
  128 000000C2 4FB4            LDR              R7, =DWT_CYCCNT ; Adresse du re
                                                            gistre DWT_CYCCNT
  129 000000C4 F8D7 8000       LDR              R8, [R7]    ; Charger la valeur
                                                             initiale dans R8 (
                                                            start)
  130 000000C8         
  131 000000C8 F04F 0201       ldr              r2, =0x1    ; Définition du nom
                                                            bre de cligottement
                                                            
  132 000000CC F000 F8CB       BL               Clignottement
  133 000000D0         
  134 000000D0 F7FF FFFE       BL               MOTEUR_DROIT_ON
  135 000000D4 F7FF FFFE       BL               MOTEUR_GAUCHE_ON
  136 000000D8 F7FF FFFE       BL               MOTEUR_DROIT_ARRIERE
  137 000000DC F7FF FFFE       BL               MOTEUR_GAUCHE_AVANT
  138 000000E0         
  139 000000E0 F44F 01BE       ldr              r1, =ROT_TIME_180
  140 000000E4 F000 F8B0       BL               wait
  141 000000E8         
  142 000000E8 F7FF FFFE       BL               MOTEUR_DROIT_AVANT
  143 000000EC F7FF FFFE       BL               MOTEUR_GAUCHE_AVANT
  144 000000F0         
  145 000000F0         mode_reperage_phase_2_loop           ; avance jusqu'a ce
                                                             qu'un bumper soit 
                                                            touché
  146 000000F0         
  147 000000F0 F7FF FFFE       BL               BUMPER_DROIT
  148 000000F4 2800            CMP              r0, #0x0
  149 000000F6 D004            BEQ              mode_reperage_phase_3 ; Si rien
                                                             est touché, contin
                                                            ue sa détection
  150 000000F8         
  151 000000F8 F7FF FFFE       BL               BUMPER_GAUCHE
  152 000000FC 2800            CMP              r0, #0x0
  153 000000FE D000            BEQ              mode_reperage_phase_3 ; Si rien
                                                             est touché, contin
                                                            ue sa détection
  154 00000100         
  155 00000100 E7F6            B                mode_reperage_phase_2_loop
  156 00000102         
  157 00000102         mode_reperage_phase_3
  158 00000102         
  159 00000102 F7FF FFFE       BL               MOTEUR_DROIT_ARRIERE
  160 00000106 F7FF FFFE       BL               MOTEUR_GAUCHE_ARRIERE
  161 0000010A         
  162 0000010A F44F 0194       ldr              r1, = 0x4A0000
  163 0000010E F000 F89B       BL               wait
  164 00000112         
  165 00000112 F7FF FFFE       BL               MOTEUR_DROIT_OFF
  166 00000116 F7FF FFFE       BL               MOTEUR_GAUCHE_OFF
  167 0000011A         
  168 0000011A         ; Lire le compteur après l'opération
  169 0000011A F8D7 9000       LDR              R9, [R7]    ; Charger la valeur
                                                             finale dans R9 (en
                                                            d)
  170 0000011E         



ARM Macro Assembler    Page 5 


  171 0000011E         ; Calculer le nombre de cycles écoulés
  172 0000011E EBA9 0308       SUB              R3, R9, R8  ; R3 = end - start
  173 00000122         
  174 00000122 EA4F 0393       LSR              r3, r3, #2
  175 00000126         
  176 00000126 489C            ldr              r0, =LONG_ADR ; Enregistrement 
                                                            de la longeur
  177 00000128 6003            str              r3, [r0]
  178 0000012A         
  179 0000012A F04F 0201       ldr              r2, =0x1    ; Définition du nom
                                                            bre de cligottement
                                                            
  180 0000012E F000 F89A       BL               Clignottement
  181 00000132         
  182 00000132 F7FF FFFE       BL               MOTEUR_DROIT_ON
  183 00000136 F7FF FFFE       BL               MOTEUR_GAUCHE_ON
  184 0000013A F7FF FFFE       BL               MOTEUR_DROIT_AVANT
  185 0000013E F7FF FFFE       BL               MOTEUR_GAUCHE_ARRIERE
  186 00000142         
  187 00000142 F44F 01BE       ldr              r1, = ROT_TIME_180
  188 00000146 F000 F87F       BL               wait
  189 0000014A         
  190 0000014A F7FF FFFE       BL               MOTEUR_DROIT_AVANT
  191 0000014E F7FF FFFE       BL               MOTEUR_GAUCHE_AVANT
  192 00000152         
  193 00000152 4891            ldr              r0, =LONG_ADR
  194 00000154 6803            ldr              r3, [r0]
  195 00000156 EA4F 0353       LSR              r3, r3, #1  ; on divise la long
                                                            eur enregistré pour
                                                             revenir au millieu
                                                            x lors de la 3ème p
                                                            hase
  196 0000015A         mode_reperage_phase_3_loop           ; avance jusqu'a ce
                                                             qu'un bumper soit 
                                                            touché
  197 0000015A 1E5B            subs             r3, r3, #1
  198 0000015C D1FD            bne              mode_reperage_phase_3_loop
  199 0000015E         
  200 0000015E F7FF FFFE       BL               MOTEUR_DROIT_ARRIERE
  201 00000162 F7FF FFFE       BL               MOTEUR_GAUCHE_AVANT
  202 00000166         
  203 00000166 F44F 113E       ldr              r1, = ROT_TIME_90
  204 0000016A F000 F86D       BL               wait
  205 0000016E         
  206 0000016E F7FF FFFE       BL               MOTEUR_GAUCHE_OFF
  207 00000172 F7FF FFFE       BL               MOTEUR_DROIT_OFF
  208 00000176         
  209 00000176 F7FF FFFE       BL               LED_DROITE_ON
  210 0000017A F7FF FFFE       BL               LED_GAUCHE_ON
  211 0000017E F44F 1180       ldr              r1, =0x100000
  212 00000182 F000 F861       BL               wait
  213 00000186 F7FF FFFE       BL               LED_DROITE_OFF
  214 0000018A F7FF FFFE       BL               LED_GAUCHE_OFF
  215 0000018E         
  216 0000018E F04F 0202       ldr              r2, =0x2    ; Définition du nom
                                                            bre de cligottement
                                                            
  217 00000192 F000 F868       BL               Clignottement
  218 00000196 E745            B                mode_passif_loop



ARM Macro Assembler    Page 6 


  219 00000198         
  220 00000198         mode_surveillance
  221 00000198 F7FF FFFE       BL               LED_GAUCHE_ON
  222 0000019C F7FF FFFE       BL               LED_DROITE_ON
  223 000001A0 F000 F85B       BL               wait_switch_2_free ; Attend que
                                                             l'utilisateur est 
                                                            éloigné son doigt
  224 000001A4 F44F 1180       ldr              r1, =0x100000
  225 000001A8 F000 F84E       BL               wait
  226 000001AC F04F 0203       ldr              r2, =0x3    ; Définition du nom
                                                            bre de cligottement
                                                            
  227 000001B0 F000 F859       BL               Clignottement
  228 000001B4         
  229 000001B4 4878            ldr              r0, =LONG_ADR
  230 000001B6 6803            ldr              r3, [r0]
  231 000001B8 F5A3 0370       sub              r3, #0xF00000
  232 000001BC         
  233 000001BC F7FF FFFE       BL               MOTEUR_DROIT_ON
  234 000001C0 F7FF FFFE       BL               MOTEUR_GAUCHE_ON
  235 000001C4 F7FF FFFE       BL               MOTEUR_DROIT_AVANT
  236 000001C8 F7FF FFFE       BL               MOTEUR_GAUCHE_ARRIERE
  237 000001CC F44F 113E       ldr              r1, =ROT_TIME_90
  238 000001D0 F000 F83A       BL               wait
  239 000001D4         
  240 000001D4 F7FF FFFE       BL               MOTEUR_DROIT_AVANT
  241 000001D8 F7FF FFFE       BL               MOTEUR_GAUCHE_AVANT
  242 000001DC         
  243 000001DC EA4F 1413       LSR              r4, r3, #4
  244 000001E0         mode_surveillance_loop_1
  245 000001E0 F7FF FFFE       BL               BUMPER_DROIT
  246 000001E4 2800            CMP              r0, #0x0
  247 000001E6 D065            BEQ              interruption_surveillance
  248 000001E8         
  249 000001E8 F7FF FFFE       BL               BUMPER_GAUCHE
  250 000001EC 2800            CMP              r0, #0x0
  251 000001EE D061            BEQ              interruption_surveillance
  252 000001F0         
  253 000001F0 3C01            subs             r4, #1
  254 000001F2 D1F5            BNE              mode_surveillance_loop_1
  255 000001F4         
  256 000001F4 F7FF FFFE       BL               MOTEUR_DROIT_ARRIERE
  257 000001F8 F7FF FFFE       BL               MOTEUR_GAUCHE_AVANT
  258 000001FC F44F 01BE       ldr              r1, =ROT_TIME_180
  259 00000200 F000 F822       BL               wait
  260 00000204 F7FF FFFE       BL               MOTEUR_DROIT_AVANT
  261 00000208 F7FF FFFE       BL               MOTEUR_GAUCHE_AVANT
  262 0000020C         
  263 0000020C EA4F 04D3       LSR              r4, r3, #3
  264 00000210 F000 F800       BL               mode_surveillance_loop_2
  265 00000214         
  266 00000214         mode_surveillance_loop_2
  267 00000214 F7FF FFFE       BL               BUMPER_DROIT
  268 00000218 2800            CMP              r0, #0x0
  269 0000021A D04B            BEQ              interruption_surveillance
  270 0000021C         
  271 0000021C F7FF FFFE       BL               BUMPER_GAUCHE
  272 00000220 2800            CMP              r0, #0x0
  273 00000222 D047            BEQ              interruption_surveillance



ARM Macro Assembler    Page 7 


  274 00000224         
  275 00000224 3C01            subs             r4, #1
  276 00000226 D1F5            BNE              mode_surveillance_loop_2
  277 00000228         
  278 00000228 F7FF FFFE       BL               MOTEUR_DROIT_ARRIERE
  279 0000022C F7FF FFFE       BL               MOTEUR_GAUCHE_AVANT
  280 00000230 F44F 01BE       ldr              r1, =ROT_TIME_180
  281 00000234 F000 F808       BL               wait
  282 00000238 F7FF FFFE       BL               MOTEUR_DROIT_AVANT
  283 0000023C F7FF FFFE       BL               MOTEUR_GAUCHE_AVANT
  284 00000240         
  285 00000240 EA4F 04D3       LSR              r4, r3, #3
  286 00000244 F7FF FFCC       BL               mode_surveillance_loop_1
  287 00000248         
  288 00000248 3901    wait    subs             r1, #1
  289 0000024A D1FD            bne              wait
  290 0000024C 4770            BX               LR
  291 0000024E         
  292 0000024E B500    wait_switch_1_free
                               PUSH             {LR}
  293 00000250         wait_switch_1_free2
  294 00000250 F7FF FFFE       BL               SWITCH_1
  295 00000254 2800            CMP              r0, #0x0
  296 00000256 D0FB            BEQ              wait_switch_1_free2
  297 00000258 BD00            POP              {PC}
  298 0000025A         
  299 0000025A B500    wait_switch_2_free
                               PUSH             {LR}
  300 0000025C         wait_switch_2_free2
  301 0000025C F7FF FFFE       BL               SWITCH_2
  302 00000260 2800            CMP              r0, #0x0
  303 00000262 D0FB            BEQ              wait_switch_2_free2
  304 00000264 BD00            POP              {PC}
  305 00000266         
  306 00000266         Clignottement
  307 00000266 B500            PUSH             {LR}
  308 00000268 F7FF FFFE       BL               LED_GAUCHE_ON
  309 0000026C F7FF FFFE       BL               LED_DROITE_ON
  310 00000270         
  311 00000270 F44F 2120       ldr              r1, =0x0A0000
  312 00000274 F7FF FFE8       BL               wait
  313 00000278         
  314 00000278 F7FF FFFE       BL               LED_GAUCHE_OFF
  315 0000027C F7FF FFFE       BL               LED_DROITE_OFF
  316 00000280         
  317 00000280 F44F 2120       ldr              r1, =0x0A0000
  318 00000284 F7FF FFE0       BL               wait
  319 00000288         
  320 00000288 3A01            subs             r2, #1
  321 0000028A BF18 F7FF 
              FFEB             BLNE             Clignottement
  322 00000290 BD00            POP              {PC}
  323 00000292         
  324 00000292         
  325 00000292         interruption_reperage
  326 00000292 F7FF FFFE       BL               MOTEUR_DROIT_ARRIERE
  327 00000296 F7FF FFFE       BL               MOTEUR_GAUCHE_ARRIERE
  328 0000029A         
  329 0000029A F44F 1180       ldr              r1, =0x100000



ARM Macro Assembler    Page 8 


  330 0000029E F7FF FFD3       BL               wait
  331 000002A2         
  332 000002A2 F7FF FFFE       BL               MOTEUR_GAUCHE_OFF
  333 000002A6 F7FF FFFE       BL               MOTEUR_DROIT_OFF
  334 000002AA         
  335 000002AA F04F 0210       ldr              r2, =0x10   ; Définition du nom
                                                            bre de cligottement
                                                            
  336 000002AE F7FF FFDA       BL               Clignottement
  337 000002B2 E6B7            B                mode_passif_loop
  338 000002B4         
  339 000002B4         interruption_surveillance
  340 000002B4 F7FF FFFE       BL               MOTEUR_DROIT_ARRIERE
  341 000002B8 F7FF FFFE       BL               MOTEUR_GAUCHE_ARRIERE
  342 000002BC         
  343 000002BC F44F 2120       ldr              r1, =0x0A0000
  344 000002C0 F7FF FFC2       BL               wait
  345 000002C4         
  346 000002C4 F7FF FFFE       BL               MOTEUR_DROIT_AVANT
  347 000002C8 F7FF FFFE       BL               MOTEUR_GAUCHE_AVANT
  348 000002CC         
  349 000002CC F44F 2120       ldr              r1, =0x0A0000
  350 000002D0 F7FF FFBA       BL               wait
  351 000002D4         
  352 000002D4 F7FF FFFE       BL               MOTEUR_DROIT_ARRIERE
  353 000002D8 F7FF FFFE       BL               MOTEUR_GAUCHE_ARRIERE
  354 000002DC         
  355 000002DC F44F 2120       ldr              r1, =0x0A0000
  356 000002E0 F7FF FFB2       BL               wait
  357 000002E4         
  358 000002E4 F7FF FFFE       BL               MOTEUR_DROIT_AVANT
  359 000002E8 F7FF FFFE       BL               MOTEUR_GAUCHE_AVANT
  360 000002EC         
  361 000002EC F44F 2120       ldr              r1, =0x0A0000
  362 000002F0 F7FF FFAA       BL               wait
  363 000002F4         
  364 000002F4 F7FF FFFE       BL               MOTEUR_DROIT_ARRIERE
  365 000002F8 F7FF FFFE       BL               MOTEUR_GAUCHE_ARRIERE
  366 000002FC         
  367 000002FC F44F 2120       ldr              r1, =0x0A0000
  368 00000300 F7FF FFA2       BL               wait
  369 00000304         
  370 00000304 F7FF FFFE       BL               MOTEUR_DROIT_AVANT
  371 00000308 F7FF FFFE       BL               MOTEUR_GAUCHE_AVANT
  372 0000030C         
  373 0000030C E68A            B                mode_passif_loop
  374 0000030E         
  375 0000030E         animation_1
  376 0000030E B500            PUSH             {LR}
  377 00000310 F7FF FFFE       BL               MOTEUR_DROIT_ON
  378 00000314 F7FF FFFE       BL               MOTEUR_GAUCHE_ON
  379 00000318 F7FF FFFE       BL               MOTEUR_DROIT_AVANT
  380 0000031C F7FF FFFE       BL               MOTEUR_GAUCHE_ARRIERE
  381 00000320         
  382 00000320 F44F 11BE       ldr              r1, =ROT_TIME_45
  383 00000324 F7FF FF90       BL               wait
  384 00000328         
  385 00000328 F7FF FFFE       BL               MOTEUR_DROIT_OFF
  386 0000032C F7FF FFFE       BL               MOTEUR_GAUCHE_OFF



ARM Macro Assembler    Page 9 


  387 00000330         
  388 00000330 F44F 1100       ldr              r1, = 0x200000
  389 00000334 F7FF FF88       BL               wait
  390 00000338         
  391 00000338 F7FF FFFE       BL               MOTEUR_DROIT_ON
  392 0000033C F7FF FFFE       BL               MOTEUR_GAUCHE_ON
  393 00000340 F7FF FFFE       BL               MOTEUR_DROIT_ARRIERE
  394 00000344 F7FF FFFE       BL               MOTEUR_GAUCHE_AVANT
  395 00000348         
  396 00000348 F44F 113E       ldr              r1, =ROT_TIME_90
  397 0000034C F7FF FF7C       BL               wait
  398 00000350         
  399 00000350 F7FF FFFE       BL               MOTEUR_DROIT_OFF
  400 00000354 F7FF FFFE       BL               MOTEUR_GAUCHE_OFF
  401 00000358         
  402 00000358 F44F 1100       ldr              r1, = 0x200000
  403 0000035C F7FF FF74       BL               wait
  404 00000360         
  405 00000360 F7FF FFFE       BL               MOTEUR_DROIT_ON
  406 00000364 F7FF FFFE       BL               MOTEUR_GAUCHE_ON
  407 00000368 F7FF FFFE       BL               MOTEUR_DROIT_AVANT
  408 0000036C F7FF FFFE       BL               MOTEUR_GAUCHE_ARRIERE
  409 00000370         
  410 00000370 F44F 11BE       ldr              r1, =ROT_TIME_45
  411 00000374 F7FF FF68       BL               wait
  412 00000378         
  413 00000378 F7FF FFFE       BL               MOTEUR_DROIT_OFF
  414 0000037C F7FF FFFE       BL               MOTEUR_GAUCHE_OFF
  415 00000380 F44F 01A0       ldr              r1, = 0x500000
  416 00000384 F7FF FF60       BL               wait
  417 00000388 BD00            POP              {PC}
  418 0000038A         
  419 0000038A         
  420 0000038A BF00            nop
  421 0000038C                 END
              E000EDFC 
              E0001000 
              E0001004 
              20000001 
Command Line: --debug --xref --diag_suppress=9931 --cpu=Cortex-M3 --apcs=interw
ork --depend=.\objects\main.d -o.\objects\main.o -I.\RTE\_Target_1 -IC:\Users\l
oicd\AppData\Local\Arm\Packs\ARM\CMSIS\5.9.0\CMSIS\Core\Include -IC:\Users\loic
d\AppData\Local\Arm\Packs\ARM\CMSIS\5.9.0\Device\ARM\ARMCM3\Include --predefine
="__MICROLIB SETA 1" --predefine="__UVISION_VERSION SETA 528" --predefine="_RTE
_ SETA 1" --predefine="ARMCM3 SETA 1" --list=.\listings\main.lst Programs\main.
s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

.text 00000000

Symbol: .text
   Definitions
      At line 1 in file Programs\main.s
   Uses
      None
Comment: .text unused
Clignottement 00000266

Symbol: Clignottement
   Definitions
      At line 306 in file Programs\main.s
   Uses
      At line 87 in file Programs\main.s
      At line 92 in file Programs\main.s
      At line 132 in file Programs\main.s
      At line 180 in file Programs\main.s
      At line 217 in file Programs\main.s
      At line 227 in file Programs\main.s
      At line 321 in file Programs\main.s
      At line 336 in file Programs\main.s

__main 00000000

Symbol: __main
   Definitions
      At line 42 in file Programs\main.s
   Uses
      At line 41 in file Programs\main.s
Comment: __main used once
animation_1 0000030E

Symbol: animation_1
   Definitions
      At line 375 in file Programs\main.s
   Uses
      At line 89 in file Programs\main.s
Comment: animation_1 used once
interruption_reperage 00000292

Symbol: interruption_reperage
   Definitions
      At line 325 in file Programs\main.s
   Uses
      None
Comment: interruption_reperage unused
interruption_surveillance 000002B4

Symbol: interruption_surveillance
   Definitions
      At line 339 in file Programs\main.s
   Uses
      At line 247 in file Programs\main.s
      At line 251 in file Programs\main.s
      At line 269 in file Programs\main.s
      At line 273 in file Programs\main.s

mode_passif_loop 00000024



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Relocatable symbols


Symbol: mode_passif_loop
   Definitions
      At line 60 in file Programs\main.s
   Uses
      At line 74 in file Programs\main.s
      At line 218 in file Programs\main.s
      At line 337 in file Programs\main.s
      At line 373 in file Programs\main.s

mode_reperage_phase_1 00000050

Symbol: mode_reperage_phase_1
   Definitions
      At line 76 in file Programs\main.s
   Uses
      At line 68 in file Programs\main.s
Comment: mode_reperage_phase_1 used once
mode_reperage_phase_1_loop 00000098

Symbol: mode_reperage_phase_1_loop
   Definitions
      At line 104 in file Programs\main.s
   Uses
      At line 113 in file Programs\main.s
Comment: mode_reperage_phase_1_loop used once
mode_reperage_phase_2 000000AA

Symbol: mode_reperage_phase_2
   Definitions
      At line 116 in file Programs\main.s
   Uses
      At line 107 in file Programs\main.s
      At line 111 in file Programs\main.s

mode_reperage_phase_2_loop 000000F0

Symbol: mode_reperage_phase_2_loop
   Definitions
      At line 145 in file Programs\main.s
   Uses
      At line 155 in file Programs\main.s
Comment: mode_reperage_phase_2_loop used once
mode_reperage_phase_3 00000102

Symbol: mode_reperage_phase_3
   Definitions
      At line 157 in file Programs\main.s
   Uses
      At line 149 in file Programs\main.s
      At line 153 in file Programs\main.s

mode_reperage_phase_3_loop 0000015A

Symbol: mode_reperage_phase_3_loop
   Definitions
      At line 196 in file Programs\main.s
   Uses
      At line 198 in file Programs\main.s



ARM Macro Assembler    Page 3 Alphabetic symbol ordering
Relocatable symbols

Comment: mode_reperage_phase_3_loop used once
mode_surveillance 00000198

Symbol: mode_surveillance
   Definitions
      At line 220 in file Programs\main.s
   Uses
      At line 72 in file Programs\main.s
Comment: mode_surveillance used once
mode_surveillance_loop_1 000001E0

Symbol: mode_surveillance_loop_1
   Definitions
      At line 244 in file Programs\main.s
   Uses
      At line 254 in file Programs\main.s
      At line 286 in file Programs\main.s

mode_surveillance_loop_2 00000214

Symbol: mode_surveillance_loop_2
   Definitions
      At line 266 in file Programs\main.s
   Uses
      At line 264 in file Programs\main.s
      At line 276 in file Programs\main.s

wait 00000248

Symbol: wait
   Definitions
      At line 288 in file Programs\main.s
   Uses
      At line 84 in file Programs\main.s
      At line 99 in file Programs\main.s
      At line 122 in file Programs\main.s
      At line 140 in file Programs\main.s
      At line 163 in file Programs\main.s
      At line 188 in file Programs\main.s
      At line 204 in file Programs\main.s
      At line 212 in file Programs\main.s
      At line 225 in file Programs\main.s
      At line 238 in file Programs\main.s
      At line 259 in file Programs\main.s
      At line 281 in file Programs\main.s
      At line 289 in file Programs\main.s
      At line 312 in file Programs\main.s
      At line 318 in file Programs\main.s
      At line 330 in file Programs\main.s
      At line 344 in file Programs\main.s
      At line 350 in file Programs\main.s
      At line 356 in file Programs\main.s
      At line 362 in file Programs\main.s
      At line 368 in file Programs\main.s
      At line 383 in file Programs\main.s
      At line 389 in file Programs\main.s
      At line 397 in file Programs\main.s
      At line 403 in file Programs\main.s
      At line 411 in file Programs\main.s



ARM Macro Assembler    Page 4 Alphabetic symbol ordering
Relocatable symbols

      At line 416 in file Programs\main.s

wait_switch_1_free 0000024E

Symbol: wait_switch_1_free
   Definitions
      At line 292 in file Programs\main.s
   Uses
      At line 81 in file Programs\main.s
Comment: wait_switch_1_free used once
wait_switch_1_free2 00000250

Symbol: wait_switch_1_free2
   Definitions
      At line 293 in file Programs\main.s
   Uses
      At line 296 in file Programs\main.s
Comment: wait_switch_1_free2 used once
wait_switch_2_free 0000025A

Symbol: wait_switch_2_free
   Definitions
      At line 299 in file Programs\main.s
   Uses
      At line 223 in file Programs\main.s
Comment: wait_switch_2_free used once
wait_switch_2_free2 0000025C

Symbol: wait_switch_2_free2
   Definitions
      At line 300 in file Programs\main.s
   Uses
      At line 303 in file Programs\main.s
Comment: wait_switch_2_free2 used once
21 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Absolute symbols

DWT_CYCCNT E0001004

Symbol: DWT_CYCCNT
   Definitions
      At line 39 in file Programs\main.s
   Uses
      At line 128 in file Programs\main.s
Comment: DWT_CYCCNT used once
LONG_ADR 20000001

Symbol: LONG_ADR
   Definitions
      At line 33 in file Programs\main.s
   Uses
      At line 176 in file Programs\main.s
      At line 193 in file Programs\main.s
      At line 229 in file Programs\main.s

ROT_TIME_180 005F0000

Symbol: ROT_TIME_180
   Definitions
      At line 36 in file Programs\main.s
   Uses
      At line 139 in file Programs\main.s
      At line 187 in file Programs\main.s
      At line 258 in file Programs\main.s
      At line 280 in file Programs\main.s

ROT_TIME_360 00BC0000

Symbol: ROT_TIME_360
   Definitions
      At line 37 in file Programs\main.s
   Uses
      None
Comment: ROT_TIME_360 unused
ROT_TIME_45 0017C000

Symbol: ROT_TIME_45
   Definitions
      At line 34 in file Programs\main.s
   Uses
      At line 382 in file Programs\main.s
      At line 410 in file Programs\main.s

ROT_TIME_90 002F8000

Symbol: ROT_TIME_90
   Definitions
      At line 35 in file Programs\main.s
   Uses
      At line 98 in file Programs\main.s
      At line 203 in file Programs\main.s
      At line 237 in file Programs\main.s
      At line 396 in file Programs\main.s

6 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
External symbols

BUMPER_DROIT 00000000

Symbol: BUMPER_DROIT
   Definitions
      At line 29 in file Programs\main.s
   Uses
      At line 105 in file Programs\main.s
      At line 147 in file Programs\main.s
      At line 245 in file Programs\main.s
      At line 267 in file Programs\main.s

BUMPER_GAUCHE 00000000

Symbol: BUMPER_GAUCHE
   Definitions
      At line 30 in file Programs\main.s
   Uses
      At line 109 in file Programs\main.s
      At line 151 in file Programs\main.s
      At line 249 in file Programs\main.s
      At line 271 in file Programs\main.s

BUMPER_INIT 00000000

Symbol: BUMPER_INIT
   Definitions
      At line 28 in file Programs\main.s
   Uses
      At line 47 in file Programs\main.s
Comment: BUMPER_INIT used once
LED_DROITE_OFF 00000000

Symbol: LED_DROITE_OFF
   Definitions
      At line 18 in file Programs\main.s
   Uses
      At line 61 in file Programs\main.s
      At line 213 in file Programs\main.s
      At line 315 in file Programs\main.s

LED_DROITE_ON 00000000

Symbol: LED_DROITE_ON
   Definitions
      At line 17 in file Programs\main.s
   Uses
      At line 78 in file Programs\main.s
      At line 209 in file Programs\main.s
      At line 222 in file Programs\main.s
      At line 309 in file Programs\main.s

LED_GAUCHE_OFF 00000000

Symbol: LED_GAUCHE_OFF
   Definitions
      At line 20 in file Programs\main.s
   Uses
      At line 62 in file Programs\main.s
      At line 214 in file Programs\main.s



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
External symbols

      At line 314 in file Programs\main.s

LED_GAUCHE_ON 00000000

Symbol: LED_GAUCHE_ON
   Definitions
      At line 19 in file Programs\main.s
   Uses
      At line 77 in file Programs\main.s
      At line 210 in file Programs\main.s
      At line 221 in file Programs\main.s
      At line 308 in file Programs\main.s

LED_INIT 00000000

Symbol: LED_INIT
   Definitions
      At line 16 in file Programs\main.s
   Uses
      At line 45 in file Programs\main.s
Comment: LED_INIT used once
MOTEUR_DROIT_ARRIERE 00000000

Symbol: MOTEUR_DROIT_ARRIERE
   Definitions
      At line 9 in file Programs\main.s
   Uses
      At line 118 in file Programs\main.s
      At line 136 in file Programs\main.s
      At line 159 in file Programs\main.s
      At line 200 in file Programs\main.s
      At line 256 in file Programs\main.s
      At line 278 in file Programs\main.s
      At line 326 in file Programs\main.s
      At line 340 in file Programs\main.s
      At line 352 in file Programs\main.s
      At line 364 in file Programs\main.s
      At line 393 in file Programs\main.s

MOTEUR_DROIT_AVANT 00000000

Symbol: MOTEUR_DROIT_AVANT
   Definitions
      At line 8 in file Programs\main.s
   Uses
      At line 96 in file Programs\main.s
      At line 102 in file Programs\main.s
      At line 142 in file Programs\main.s
      At line 184 in file Programs\main.s
      At line 190 in file Programs\main.s
      At line 235 in file Programs\main.s
      At line 240 in file Programs\main.s
      At line 260 in file Programs\main.s
      At line 282 in file Programs\main.s
      At line 346 in file Programs\main.s
      At line 358 in file Programs\main.s
      At line 370 in file Programs\main.s
      At line 379 in file Programs\main.s
      At line 407 in file Programs\main.s



ARM Macro Assembler    Page 3 Alphabetic symbol ordering
External symbols


MOTEUR_DROIT_OFF 00000000

Symbol: MOTEUR_DROIT_OFF
   Definitions
      At line 7 in file Programs\main.s
   Uses
      At line 64 in file Programs\main.s
      At line 124 in file Programs\main.s
      At line 165 in file Programs\main.s
      At line 207 in file Programs\main.s
      At line 333 in file Programs\main.s
      At line 385 in file Programs\main.s
      At line 399 in file Programs\main.s
      At line 413 in file Programs\main.s

MOTEUR_DROIT_ON 00000000

Symbol: MOTEUR_DROIT_ON
   Definitions
      At line 6 in file Programs\main.s
   Uses
      At line 94 in file Programs\main.s
      At line 134 in file Programs\main.s
      At line 182 in file Programs\main.s
      At line 233 in file Programs\main.s
      At line 377 in file Programs\main.s
      At line 391 in file Programs\main.s
      At line 405 in file Programs\main.s

MOTEUR_GAUCHE_ARRIERE 00000000

Symbol: MOTEUR_GAUCHE_ARRIERE
   Definitions
      At line 13 in file Programs\main.s
   Uses
      At line 97 in file Programs\main.s
      At line 119 in file Programs\main.s
      At line 160 in file Programs\main.s
      At line 185 in file Programs\main.s
      At line 236 in file Programs\main.s
      At line 327 in file Programs\main.s
      At line 341 in file Programs\main.s
      At line 353 in file Programs\main.s
      At line 365 in file Programs\main.s
      At line 380 in file Programs\main.s
      At line 408 in file Programs\main.s

MOTEUR_GAUCHE_AVANT 00000000

Symbol: MOTEUR_GAUCHE_AVANT
   Definitions
      At line 12 in file Programs\main.s
   Uses
      At line 103 in file Programs\main.s
      At line 137 in file Programs\main.s
      At line 143 in file Programs\main.s
      At line 191 in file Programs\main.s
      At line 201 in file Programs\main.s



ARM Macro Assembler    Page 4 Alphabetic symbol ordering
External symbols

      At line 241 in file Programs\main.s
      At line 257 in file Programs\main.s
      At line 261 in file Programs\main.s
      At line 279 in file Programs\main.s
      At line 283 in file Programs\main.s
      At line 347 in file Programs\main.s
      At line 359 in file Programs\main.s
      At line 371 in file Programs\main.s
      At line 394 in file Programs\main.s

MOTEUR_GAUCHE_OFF 00000000

Symbol: MOTEUR_GAUCHE_OFF
   Definitions
      At line 11 in file Programs\main.s
   Uses
      At line 63 in file Programs\main.s
      At line 125 in file Programs\main.s
      At line 166 in file Programs\main.s
      At line 206 in file Programs\main.s
      At line 332 in file Programs\main.s
      At line 386 in file Programs\main.s
      At line 400 in file Programs\main.s
      At line 414 in file Programs\main.s

MOTEUR_GAUCHE_ON 00000000

Symbol: MOTEUR_GAUCHE_ON
   Definitions
      At line 10 in file Programs\main.s
   Uses
      At line 95 in file Programs\main.s
      At line 135 in file Programs\main.s
      At line 183 in file Programs\main.s
      At line 234 in file Programs\main.s
      At line 378 in file Programs\main.s
      At line 392 in file Programs\main.s
      At line 406 in file Programs\main.s

MOTEUR_INIT 00000000

Symbol: MOTEUR_INIT
   Definitions
      At line 5 in file Programs\main.s
   Uses
      At line 44 in file Programs\main.s
Comment: MOTEUR_INIT used once
SWITCH_1 00000000

Symbol: SWITCH_1
   Definitions
      At line 24 in file Programs\main.s
   Uses
      At line 66 in file Programs\main.s
      At line 294 in file Programs\main.s

SWITCH_2 00000000

Symbol: SWITCH_2



ARM Macro Assembler    Page 5 Alphabetic symbol ordering
External symbols

   Definitions
      At line 25 in file Programs\main.s
   Uses
      At line 70 in file Programs\main.s
      At line 301 in file Programs\main.s

SWITCH_INIT 00000000

Symbol: SWITCH_INIT
   Definitions
      At line 23 in file Programs\main.s
   Uses
      At line 46 in file Programs\main.s
Comment: SWITCH_INIT used once
20 symbols
383 symbols in table
